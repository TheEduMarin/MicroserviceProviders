using Microsoft.AspNetCore.Mvc; using Providers.Domain; namespace Providers.Api.Controllers; [ApiController][Route("api/providers")] public class ProvidersController:ControllerBase{ IProviderRepository repo; public ProvidersController(IProviderRepository r)=>repo=r; [HttpGet] public async Task<IActionResult> List()=>Ok((await repo.ListAsync()).Value); [HttpGet("{id}")] public async Task<IActionResult> Get(int id){var r=await repo.GetAsync(id); return r.Value==null?NotFound():Ok(r.Value);} [HttpPost] public async Task<IActionResult> Create([FromBody]Provider p){var r=await repo.CreateAsync(p); return Created($"api/providers/{r.Value.Id}",r.Value);} [HttpPut("{id}")] public async Task<IActionResult> Update(int id,[FromBody]Provider p){p.Id=id; var r=await repo.UpdateAsync(p); return Ok(r.Value);} [HttpDelete("{id}")] public async Task<IActionResult> Delete(int id){await repo.DeleteAsync(id); return NoContent();}}